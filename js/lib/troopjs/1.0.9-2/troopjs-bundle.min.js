/*!
* TroopJS Bundle - 1.0.5-23-ge4a0409
* http://troopjs.com/
* Copyright (c) 2012 Mikael Karon <mikael@karon.se>
* Licensed MIT
*/
(function(e){e("compose",[],function(){function e(){}function n(e){if(!e)throw new Error("Compose arguments must be functions or objects");return e}function r(e,t,r){var s,o=t.length;for(;r<o;r++){var u=t[r];if(typeof u=="function"){var a=u.prototype;for(var l in a){s=a[l];var c=a.hasOwnProperty(l);if(typeof s=="function"&&l in e&&s!==e[l]){var p=e[l];s==f?s=p:c||(i(s,l,h([].slice.call(t,0,r),!0))?s=p:i(p,l,h([u],!0))||console.error("Conflicted method "+l+", final composer must explicitly override with correct method."))}s&&s.install&&c&&!i(p,l,h([u],!0))?s.install.call(e,l):e[l]=s}}else for(var l in n(u)){var s=u[l];if(typeof s=="function"){if(s.install){s.install.call(e,l);continue}if(l in e&&s==f)continue}e[l]=s}}return e}function i(e,t,n){for(var r=0;r<n.length;r++){var i=n[r];if(i[t]==e)return!0}}function s(e,t){function n(){if(t)return t.apply(this,arguments);throw new Error("Decorator not applied")}return n.install=e,n}function o(e){return function(t){return s(function n(r){var i=this[r];(t=this[r]=i?e(this,i,t):t).install=n},t)}}function f(){throw new Error("This method is required and no implementation has been provided")}function l(){var e=[this];return e.push.apply(e,arguments),c.apply(0,e)}function c(i){function u(){var t;this instanceof u?t=this:(e.prototype=o,t=new e);for(var n=0;n<f;n++){var r=a[n],i=r.apply(t,arguments);if(typeof i=="object")if(i instanceof u)t=i;else for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}return t}var s=arguments,o=s.length<2&&typeof s[0]!="function"?s[0]:r(t(n(i)),s,1);u._getBases=function(e){return e?p:a};var a=h(s),f=a.length;typeof s[s.length-1]=="object"&&(s[s.length-1]=o);var p=h(s,!0);return u.extend=l,c.secure||(o.constructor=u),u.prototype=o,u}function h(e,t){function r(e,i){e:for(var s=0;s<e.length;s++){var o=e[s],u=t&&typeof o=="function"?o.prototype:o;if(t||typeof o=="function"){var a=i&&o._getBases;if(a)r(a(t));else{for(var f=0;f<n.length;f++)if(u==n[f])continue e;n.push(u)}}}}var n=[];return r(e,!0),n}var t=Object.create?function(e){return Object.create(typeof e=="function"?e.prototype:e||Object.prototype)}:function(t){e.prototype=typeof t=="function"?t.prototype:t;var n=new e;return e.prototype=null,n};c._setMixin=function(e){r=e},c.Decorator=s,c.around=o(function(e,t,n){return n.call(e,t)}),c.before=o(function(e,t,n){return function(){var e=n.apply(this,arguments);if(e!==u)return t.apply(this,e||arguments)}});var u=c.stop={},a;return c.after=o(function(e,t,n){return function(){var e=t.apply(this,arguments),r=n.apply(this,arguments);return r===a?e:r}}),c.from=function(e,t){return t?(typeof e=="function"?e.prototype:e)[t]:s(function(n){if(!(this[n]=typeof e=="string"?this[e]:(typeof e=="function"?e.prototype:e)[t||n]))throw new Error("Source method "+t+" was not available to be renamed to "+n)})},c.create=function(e){var n=r(t(e),arguments,1),i=arguments.length;for(var s=0;s<i;s++){var o=arguments[s];typeof o=="function"&&(n=o.call(n)||n)}return n},c.required=f,c.apply=function(e,t){return e?r(e,t,0):l.apply.call(c,0,t)},c.call=function(e){return r(e,arguments,1)},c})})(typeof define!="undefined"?define:function(e,t){typeof module!="undefined"?module.exports=t():Compose=t()}),define("troopjs-core/component/base",["compose","config"],function(t,n){var r=0,i=t(function(){this.instanceCount=r++},{displayName:"core/component",config:n});return i.prototype.toString=function(){var e=this;return e.displayName+"@"+e.instanceCount},i}),define("troopjs-utils/deferred",["jquery"],function(t){return t.Deferred}),define("troopjs-utils/unique",[],function(){return function(t){var n=this,r=n.length,i=[],s,o,u,a;e:for(o=u=a=0;o<r;o++,u=0){s=n[o];while(u<a)if(t.call(n,s,i[u++])===!0)continue e;i[a++]=s}return i}}),define("troopjs-core/pubsub/topic",["../component/base","troopjs-utils/unique"],function(t,n){function s(e,t){return e.publisherInstanceCount===t.publisherInstanceCount}var r=Object.prototype.toString,i=r.call(Array.prototype),o=t.extend(function(t,n,r){var i=this;i.topic=t,i.publisher=n,i.parent=r,i.publisherInstanceCount=n.instanceCount},{displayName:"core/pubsub/topic",trace:function(){var t=this,o=t.constructor,u,a,f="",l,c,h;while(t){if(r.call(t)===i){c=n.call(t,s);for(l=0,h=c.length;l<h;l++)a=c[l],c[l]=a.constructor===o?a.trace():a.topic;f+=c.join(",");break}u=t.parent,f+=u?t.publisher+":":t.publisher,t=u}return f}});return o.prototype.toString=function(){return this.topic},o}),define("troopjs-core/pubsub/hub",["compose","../component/base","./topic"],function(t,n,r){var i,s=Function,o="memory",u="context",a="callback",f="length",l="head",c="tail",h="next",p="handled",d={},v={},m=0;return t.create({displayName:"core/pubsub/hub",subscribe:function(t){var n=this,r=arguments,i=r[f],m=r[1],g=r[2],y=r[3],b,w,E,S,x,T;if(m instanceof s)y=m,g=!1,m=d,b=1;else if(m===!0||m===!1)y=g,g=m,m=d,b=2;else if(g instanceof s)y=g,g=!1,b=2;else{if(!(y instanceof s))return n;b=3}if(t in v){w=v[t],E={callback:r[b++],context:m},T=c in w?w[c][h]=E:w[l]=E;while(b<i)T=T[h]={callback:r[b++],context:m};w[c]=T;if(g&&o in w){g=w[o],S=g[p];if(g[f]>0)while(E){if(E[p]===S){E=E[h];continue}E[p]=S,E[a].apply(E[u],g),E=E[h]}else while(E){if(E[p]===S){E=E[h];continue}E[p]=S,E[a].call(E[u]),E=E[h]}}}else{x=T={callback:r[b++],context:m};while(b<i)T=T[h]={callback:r[b++],context:m};v[t]={head:x,tail:T}}return n},unsubscribe:function(t){var n=this,r=arguments,o=r[f],p=r[1],m=r[2],g,y,b,w,E=null;if(p instanceof s)m=p,p=d,g=1;else{if(!(m instanceof s))return n;g=2}if(t in v){y=v[t],w=y[l];while(g<o){m=r[g++],b=E=w;do{if(b[a]===m&&b[u]===p){if(b===w){w=E=b[h];continue}E[h]=b[h];continue}E=b}while((b=b[h])!==i)}return w&&E?(y[l]=w,y[c]=E):(delete y[l],delete y[c]),n}return n},publish:function(t){var n=arguments,r,i,s=n[p]=m++;if(t in v){r=v[t],r[o]=n,i=r[l];if(n[f]>0)while(i){if(i[p]===s){i=i[h];continue}i[p]=s,i[a].apply(i[u],n),i=i[h]}else while(i){if(i[p]===s){i=i[h];continue}i[p]=s,i[a].call(i[u]),i=i[h]}}else n[f]>0&&(v[t]=r={},r[o]=n);return this}})}),define("troopjs-core/component/gadget",["compose","./base","troopjs-utils/deferred","../pubsub/hub"],function(t,n,r,i){var s,o=null,u=Function,a=/^hub(?::(\w+))?\/(.+)/,f=/^sig\/(.+)/,l=i.publish,c=i.subscribe,h=i.unsubscribe,p="memory",d="subscriptions";return n.extend(function(){var n=this,i=n.constructor._getBases(!0),s,a,l,c,h,p,d={},v,m,g=null;for(c=i.length-1;c>=0;c--){s=i[c];e:for(g in s){l=s[g];if(!(l instanceof u))continue;m=f.exec(g);if(m!==o){v=m[1];if(v in d){a=d[v],h=p=a.length;while(h--)if(l===a[h])continue e;a[p]=l}else d[v]=[l]}}}t.call(n,{signal:function(t,n){var i=this,s,o,u=n;if(t in d){s=d[t],o=s.length;while(--o)u=r(function(e){var n=s[o],r=u;e.done(function(){n.call(i,t,r)})});s[0].call(i,t,u)}else n&&n.resolve();return i}})},{displayName:"core/component/gadget","sig/initialize":function(t,n){var r=this,s=r[d]=[],f=o,l,c,h;for(f in r){l=r[f];if(!(l instanceof u))continue;c=a.exec(f),c!==o&&(h=c[2],i.subscribe(h,r,c[1]===p,l),s[s.length]=[h,r,l],r[f]=o)}return n&&n.resolve(),r},"sig/finalize":function(t,n){var r=this,o=r[d],u;while((u=o.shift())!==s)i.unsubscribe(u[0],u[1],u[2]);return n&&n.resolve(),r},publish:function(){var t=this;return l.apply(i,arguments),t},subscribe:function(){var t=this;return c.apply(i,arguments),t},unsubscribe:function(){var t=this;return h.apply(i,arguments),t},start:function(t){var n=this;return t=t||r(),r(function(i){i.then(t.resolve,t.reject,t.notify),r(function(t){t.then(function(){n.signal("start",i)},i.reject,i.notify),n.signal("initialize",t)})}),n},stop:function(t){var n=this;return t=t||r(),r(function(i){i.then(t.resolve,t.reject,t.notify),r(function(t){t.then(function(){n.signal("finalize",i)},i.reject,i.notify),n.signal("stop",t)})}),n}})}),define("troopjs-core/component/service",["./gadget"],function(t){return t.extend({displayName:"core/component/service"})}),define("troopjs-core/dimensions/service",["../component/service"],function(t){function i(e,t,r){e.data.publish(n,t,r)}var n="dimensions",r="$element";return t.extend(function(t,i){var s=this;s[r]=t,s[n]=i},{displayName:"core/dimensions/service","sig/initialize":function(t,s){var o=this;o[r].bind(n+"."+o[n],o,i),s&&s.resolve()},"sig/start":function(t,i){var s=this;s[r].trigger("resize."+n),i&&i.resolve()},"sig/finalize":function(t,s){var o=this;o[r].unbind(n+"."+o[n],i),s&&s.resolve()}})}),define("troopjs-core/component/widget",["./gadget","jquery","troopjs-utils/deferred"],function(t,n,r){function S(e,t,n){return function(){return f.call(arguments,e),n.apply(t,arguments)}}function x(e){function t(){var t=this,n=t[m],s=arguments,u=a.call(s),f=s[s.length-1];if(f===i||!(f[b]instanceof o))f=r();return r(function(i){i.then(function(){n.trigger(v,arguments),f.resolve()},f.reject,f.notify),i.notify("beforeRender",t),e.call(n,u instanceof o?u.apply(t,s):u),i.notify("afterRender",t),n.find(w).weave(i)}),t}return t}var i,s=null,o=Function,u=Array.prototype,a=u.shift,f=u.unshift,l=n.fn.trigger,c=n.fn.one,h=n.fn.bind,p=n.fn.unbind,d=/^dom(?::(\w+))?\/([^\.]+(?:\.(.+))?)/,v="widget/refresh",m="$element",g="$proxies",y="one",b="then",w="[data-weave]",E="[data-woven]";return t.extend(function(t,n){var r=this;r[m]=t,n&&(r.displayName=n)},{displayName:"core/component/widget","sig/initialize":function(t,n){var r=this,i=r[m],u=r[g]=[],a=s,f,l,p;for(a in r){f=r[a];if(!(f instanceof o))continue;l=d.exec(a),l!==s&&(p=l[2],f=S(p,r,f),(l[2]===y?c:h).call(i,p,r,f),u[u.length]=[p,f],r[a]=s)}return n&&n.resolve(),r},"sig/finalize":function(t,n){var r=this,s=r[m],o=r[g],u;while((u=o.shift())!==i)s.unbind(u[0],u[1]);return delete r[m],n&&n.resolve(),r},weave:function(t){var n=this;return n[m].find(w).weave(t),n},unweave:function(t){var n=this;return n[m].find(E).andSelf().unweave(t),this},one:function(){var t=this;return c.apply(t[m],arguments),t},bind:function(){var t=this;return h.apply(t[m],arguments),t},unbind:function(){var t=this;return p.apply(t[m],arguments),t},trigger:function(){var t=this;return l.apply(t[m],arguments),t},before:x(n.fn.before),after:x(n.fn.after),html:x(n.fn.html),text:x(n.fn.text),append:x(n.fn.append),prepend:x(n.fn.prepend),empty:function(t){var n=this;return t=t||r(),r(function(r){r.then(t.resolve,t.reject,t.notify);var i=n[m],s=i.contents().detach();i.trigger(v,n),setTimeout(function(){var t=s.get();s.remove(),r.resolve(t)},0)}),n}})}),define("troopjs-utils/merge",[],function(){var t=Array,n=Object;return function r(e){var i=this,s=null,o,u,a,f;for(o=0,u=arguments.length;o<u;o++){e=arguments[o];for(s in e)a=e[s],f=a.constructor,s in i?f===t?i[s]=i[s].concat(a):f===n?r.call(i[s],a):i[s]=a:i[s]=a}return i}}),define("troopjs-core/remote/ajax",["../component/service","../pubsub/topic","jquery","troopjs-utils/merge"],function(t,n,r,i){return t.extend({displayName:"core/remote/ajax","hub/ajax":function(t,s,o){r.ajax(i.call({headers:{"x-request-id":(new Date).getTime(),"x-components":t instanceof n?t.trace():t}},s)).then(o.resolve,o.reject,o.notify)}})}),define("troopjs-core/store/base",["compose","../component/gadget"],function(t,n){var r="storage";return n.extend({storage:t.required,set:function(t,n,i){this[r].setItem(t,JSON.stringify(n)),i&&i.resolve(n)},get:function(t,n){var i=JSON.parse(this[r].getItem(t));n&&n.resolve(i)},remove:function(t,n){this[r].removeItem(t),n&&n.resolve()},clear:function(t){this[r].clear(),t&&t.resolve()}})}),define("troopjs-core/store/session",["compose","./base"],function(t,n){return t.create(n,{displayName:"core/store/session",storage:window.sessionStorage})}),define("troopjs-core/store/local",["compose","./base"],function(t,n){return t.create(n,{displayName:"core/store/local",storage:window.localStorage})}),define("troopjs-core/widget/placeholder",["../component/widget","troopjs-utils/deferred","require"],function(t,n,r){function c(){var e=this,t=arguments,c=t.length,h=c>0&&t[c-1][l]instanceof i?s.call(t):n();return n(function(s){var l,c,p,d;if(o in e)s.done(h.resolve).resolve(e[o]);else{s.then([function(n){e[a].attr(u,n),e[o]=n},h.resolve],h.reject,h.notify),p=e[f],d=[e[a],p];for(l=0,c=t.length;l<c;l++)d[l+2]=t[l];r([p],function(t){n(function(n){var r=t.apply(t,d);n.then(function(){s.resolve(r)},s.reject,s.notify),r.start(n)})})}}),e}function h(e){var t=this;return e=e||n(),n(function(r){var i;r.then(e.resolve,e.reject,e.notify),o in t?(i=t[o],delete t[o],t[a].removeAttr(u),i.stop(r)):r.resolve()}),t}var i=Function,s=Array.prototype.pop,o="holding",u="data-"+o,a="$element",f="target",l="then";return t.extend(function(t,n,r){this[f]=r},{displayName:"core/widget/placeholder","sig/finalize":function(t,n){this.hold(n)},release:c,hold:h})}),define("troopjs-core/route/placeholder",["../widget/placeholder"],function(t){var n=null,r="route";return t.extend(function(t,n){this[r]=RegExp(t.data("route"))},{displayName:"core/route/placeholder","hub:memory/route":function(t,i){var s=this,o=s[r].exec(i.path);o!==n?s.release.apply(s,o.slice(1)):s.hold()}})}),define("troopjs-utils/uri",["compose"],function(t){function w(e){var t={},r,i=n,s,o=/(?:&|^)([^&=]*)=?([^&]*)/g;t.toString=w.toString;if(u.call(e)===a)for(i in e)t[i]=e[i];else while((r=o.exec(e))!==n)i=r[1],i in t?(s=t[i],u.call(s)===f?s[s.length]=r[2]:t[i]=[s,r[2]]):t[i]=r[2];return t}function E(e){var t=[];return t.toString=E.toString,s.apply(t,u.call(e)===f?e:o.call(e,"/")),t}var n=null,r=Array.prototype,i=Object.prototype,s=r.push,o=String.prototype.split,u=i.toString,a=u.call(i),f=u.call(r),l=u.call(String.prototype),c=u.call(Function.prototype),h=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:([^?#]*)(?:\?([^#]*))?(?:#(.*))?)/,p="protocol",d="authority",v="path",m="query",g="anchor",y=["source",p,d,"userInfo","user","password","host","port",v,m,g],b=t.secure;t.secure=!0,w.toString=function x(){var e=this,t=n,r=n,i,s=[],o=0,a;for(t in e){if(u.call(e[t])===c)continue;s[o++]=t}s.sort();while(o--){t=s[o],r=e[t];if(u.call(r)===f){i=r.slice(0),i.sort(),a=i.length;while(a--)r=i[a],i[a]=r===""?t:t+"="+r;s[o]=i.join("&")}else s[o]=r===""?t:t+"="+r}return s.join("&")},E.toString=function(){return this.join("/")};var S=t(function(t){var r=this,i,s,o;if((s=h.exec(t))!==n){o=s.length;while(o--)i=s[o],i&&(r[y[o]]=i)}m in r&&(r[m]=w(r[m])),v in r&&(r[v]=E(r[v]))});return S.prototype.toString=function(){var e=this,t=[p,"://",d,v,"?",m,"#",g],n,r;p in e||(t[0]=t[1]=""),d in e||(t[2]=""),v in e||(t[3]=""),m in e||(t[4]=t[5]=""),g in e||(t[6]=t[7]=""),n=t.length;while(n--)r=t[n],r in e&&(t[n]=e[r]);return t.join("")},t.secure=b,S.Path=E,S.Query=w,S}),define("troopjs-core/route/router",["../component/service","troopjs-utils/uri"],function(t,n){function u(e){var t=e.data,r=n(e.target.location.hash.replace(o,"")),i=r.toString();i!==t[s]&&(t[s]=i,t.publish(s,r))}var r="hashchange",i="$element",s="route",o=/^#/;return t.extend(function(t){this[i]=t},{displayName:"core/route/router","sig/initialize":function(t,n){var s=this;return s[i].bind(r,s,u),n&&n.resolve(),s},"sig/start":function(t,n){var s=this;return s[i].trigger(r),n&&n.resolve(),s},"sig/finalize":function(t,n){var s=this;return s[i].unbind(r,u),n&&n.resolve(),s}})}),define("troopjs-core/widget/application",["../component/widget","troopjs-utils/deferred"],function(t,n){return t.extend({displayName:"core/widget/application","sig/start":function(t,n){this.weave(n)},"sig/stop":function(t,n){this.unweave(n)}})}),define("troopjs-requirejs/template",[],function(){function f(e){function l(e,n,r){return t[f]=n?'" +'+r+'+ "':'";'+r+'o += "',"<%"+String(f++)+"%>"}function c(e,n){return t[n]}function h(e,t){return a[t]||t}var t=[],f=0;return('function template(data) { var o = "'+e.replace(n,"").replace(r,l).replace(s,h).replace(i,c)+'"; return o; }').replace(o,u)}var t={node:function(){var e=require.nodeRequire("fs");return function(n,r){r(e.readFileSync(n,"utf8"))}},browser:function(){var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],t,n,r;if(typeof XMLHttpRequest!="undefined")n=XMLHttpRequest;else{for(r=0;r<3;r++){t=e[r];try{new ActiveXObject(t),n=function(){return new ActiveXObject(t)};break}catch(i){}}if(!n)throw new Error("XHR: XMLHttpRequest not available")}return function(t,r){var i=new n;i.open("GET",t,!0),i.onreadystatechange=function(e){i.readyState===4&&r(i.responseText)},i.send(null)}},rhino:function(){var e="utf-8",t=java.lang.System.getProperty("line.separator");return function(r,i){var s=new java.io.File(r),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),e)),u=new java.lang.StringBuffer,a,f="";try{a=o.readLine(),a&&a.length()&&a.charAt(0)===65279&&(a=a.substring(1)),u.append(a);while((a=o.readLine())!==null)u.append(t),u.append(a);f=String(u.toString())}finally{o.close()}i(f)}},borked:function(){return function(){throw new Error("Environment unsupported.")}}},n=/^[\n\t\r]+|[\n\t\r]+$/g,r=/<%(=)?([\S\s]*?)%>/g,i=/<%(\d+)%>/gm,s=/(["\n\t\r])/gm,o=/o \+= "";| \+ ""/gm,u="",a={'"':'\\"',"\n":"\\n","	":"\\t","\r":"\\r"},l={},c=t[typeof process!="undefined"&&process.versions&&!!process.versions.node?"node":typeof window!="undefined"&&window.navigator&&window.document||typeof importScripts!="undefined"?"browser":typeof Packages!="undefined"?"rhino":"borked"]();return{load:function(e,t,n,r){var i=t.toUrl(e);c(i,function(s){try{s="define(function() { return "+f(s,e,i,r.template)+"; })"}catch(o){throw o.message="In "+i+", "+o.message,o}r.isBuild?l[e]=s:s+="\n//@ sourceURL='"+i+"'",n.fromText(e,s),t([e],function(e){n(e)})})},write:function(e,t,n){l.hasOwnProperty(t)&&n.asModule(e+"!"+t,l[t])}}}),define("troopjs-utils/when",["jquery"],function(t){return t.when}),define("troopjs-utils/grep",["jquery"],function(t){return t.grep}),define("troopjs-utils/getargs",[],function(){var t=Array.prototype.push,n=String.prototype.substring,r=/^(?:false|true)$/i,i=/^true$/i,s=/^\d+$/;return function(){var o=this,u=[],a,f,l,c,h,p,d=!1;for(f=l=c=0,a=o.length;c<a;c++){h=o.charAt(c);switch(h){case'"':case"'":d===h?(d=!1,t.call(u,n.call(o,f,l))):d=h,f=l=c+1;break;case",":if(d){l=c+1;break}f!==l&&(p=n.call(o,f,l),r.test(p)?p=i.test(p):s.test(p)&&(p=+p),t.call(u,p)),f=l=c+1;break;case" ":case"	":if(d){l=c+1;break}f===l&&(f=l=c+1);break;default:l=c+1}}return f!==l&&(p=n.call(o,f,l),r.test(p)?p=i.test(p):s.test(p)&&(p=+p),t.call(u,p)),u}}),define("troopjs-utils/callbacks",["jquery"],function(t){return t.Callbacks}),define("troopjs-utils/tr",[],function(){var t=typeof Number();return function(n){var r=this,i=[],s,o=r.length,u;if(typeof o===t&&o===0||o>0&&0 in r&&o-1 in r)for(s=0;s<o;s++)i.push(n.call(r,r[s],s));else if(r)for(u in r)i.push(n.call(r,r[u],u));return i}}),define("troopjs-utils/each",["jquery"],function(t){return t.each}),define("troopjs-jquery/action",["jquery","troopjs-utils/getargs"],function(t,n){function c(e,t){return e?e+"."+u:s}function h(e){var n=t(this),r=o.call(arguments,1),s=a in e?e[a].type:u,f=e[u];e.type=u+"/"+f+"."+s,n.trigger(e,r),e.result!==i&&(e.type=u+"/"+f+"!",n.trigger(e,r),e.result!==i&&(e.type=u+"."+s,n.trigger(e,r)))}function p(e){var i=t(e.target).closest("[data-action]");if(i.length===0)return;var o=i.data(),a=f.exec(o[u]);if(a===s)return;var c=a[1],h=a[2],p=a[3];if(h!==r&&!RegExp(h.split(l).join("|")).test(e.type))return;var d=p!==r?n.call(p):[];t.each(d,function(t,n){n in o&&(d[t]=o[n])}),i.trigger(t.Event(e,{type:u+"!",action:c}),d),e.stopPropagation()}var r,i=!1,s=null,o=Array.prototype.slice,u="action",a="originalEvent",f=/^([\w\d\s_\-\/]+)(?:\.([\w\.]+))?(?:\((.*)\))?$/,l=/\.+/;t.event.special[u]={setup:function(n,r,i){t(this).bind(u,n,h)},add:function(n){var r=t.map(n.namespace.split(l),c);r.length!==0&&t(this).bind(r.join(" "),p)},remove:function(n){var r=t.map(n.namespace.split(l),c);r.length!==0&&t(this).unbind(r.join(" "),p)},teardown:function(n){t(this).unbind(u,h)}},t.fn[u]=function(n){return t(this).trigger({type:u+"!",action:n},o.call(arguments,1))}}),define("troopjs-jquery/dimensions",["jquery"],function(t){function f(e,t){return t-e}function l(e){var n=t(this),i=n.width(),f=n.height();t.each(t.data(self,r),function(t,l){var c=l[s],h=l[o],p,d,v;v=c.length,p=c[v-1];while(c[--v]<i)p=c[v];v=h.length,d=h[v-1];while(h[--v]<f)d=h[v];if(p!==l[u]||d!==l[a])l[u]=p,l[a]=d,n.trigger(r+"."+t,[p,d])})}var n=null,r="dimensions",i="resize."+r,s="w",o="h",u="_"+s,a="_"+o;t.event.special[r]={setup:function(n,s,o){t(this).bind(i,l).data(r,{})},add:function(i){var u=this,a=i.namespace,l={},c=l[s]=[],h=l[o]=[],p=/(w|h)(\d+)/g,d;while((d=p.exec(a))!==n)l[d[1]].push(parseInt(d[2],10));c.sort(f),h.sort(f),t.data(u,r)[a]=l},remove:function(n){delete t.data(this,r)[n.namespace]},teardown:function(n){t(this).removeData(r).unbind(i,l)}}}),define("troopjs-jquery/destroy",["jquery"],function(t){t.event.special.destroy={remove:function(n){var r=this;n.handler.call(r,t.Event({type:n.type,data:n.data,namespace:n.namespace,target:r}))}}}),define("troopjs-jquery/resize",["jquery"],function(t){function a(e,n){var o=t.data(n),u=t(n),a=u.width(),f=u.height();(a!==o[i]||f!==o[s])&&u.trigger(r,[o[i]=a,o[s]=f])}function f(){o.each(a)}var n=null,r="resize",i="w",s="h",o=t([]),u=n;t.event.special[r]={setup:function(n,a,l){var c=this;if(t.isWindow(c))return!1;var h=t.data(c,r,{}),p=t(c);h[i]=p.width(),h[s]=p.height(),o=o.add(c),o.length===1&&(u=setInterval(f,100))},teardown:function(i){var s=this;if(t.isWindow(s))return!1;t.removeData(s,r),o=o.not(s),o.length===0&&u!==n&&clearInterval(u)}}}),define("troopjs-jquery/weave",["jquery","troopjs-utils/getargs","require"],function(t,n,r){function C(){t(this).unweave()}var i,s=null,o=Array,u=Function,a=o.prototype,f=a.join,l=a.push,c=a.pop,h=t.when,p="then",d="weave",v="unweave",m="woven",g="weaving",y="pending",b="destroy",w="data-",E=w+d,S=w+m,x=w+g,T="["+E+"]",N="["+x+"],["+S+"]";t.expr[":"][m]=t.expr.createPseudo?t.expr.createPseudo(function(e){return e!==i&&(e=RegExp(t.map(n.call(e),function(e){return"^"+e+"@"}).join("|"),"m")),function(n,r,s){var o=t(n).attr(S);return o===i?!1:e===i?!0:e.test(o.split(/[\s,]+/).join("\n"))}}):function(e,r,s){var o=t(e).attr(S);return o===i?!1:s===i?!0:RegExp(t.map(n.call(s[3]),function(e){return"^"+e+"@"}).join("|"),"m").test(o.split(/[\s,]+/).join("\n"))},t.fn[d]=function(){var o=[],a=0,v=t(this),g=arguments,w=g.length,N=w>0&&g[w-1][p]instanceof u?c.call(g):t.Deferred();return v.filter(T).each(function(u,c){t.Deferred(function(u){var p=t(c),v=p.data(),w=v[d]=p.attr(E)||"",T=v[m]||(v[m]=[]),N=v[y]||(v[y]=[]);u.done(function(){p.removeAttr(x).attr(S,f.call(arguments," "))}),h.apply(t,N).then(function(){var f=/[\s,]*([\w_\-\/\.]+)(?:\(([^\)]+)\))?/g,c=a,d=0,m;l.call(N,u),p.removeAttr(E).attr(x,w).bind(b,C);while((m=f.exec(w))!==s)t.Deferred(function(s){var f=d++,l,c,h,y;o[a++]=s,s.then(function(t){T[f]=t},u.reject,u.notify);var b=m[1],w=[p,b];for(l=0,h=g.length,c=w.length;l<h;l++,c++)w[c]=g[l];var E=m[2];if(E!==i){E=n.call(E);for(l=0,h=E.length,c=w.length;l<h;l++,c++)y=E[l],w[c]=y in v?v[y]:y}r([b],function(n){t.Deferred(function(t){var r=n.apply(n,w);t.then(function(){s.resolve(r)},s.reject,s.notify),r.start(t)})})});h.apply(t,o.slice(c,a)).then(u.resolve,u.reject,u.notify)},u.reject,u.notify)})}),h.apply(t,o).then(N.resolve,N.reject,N.notify),v},t.fn[v]=function(n){var r=[],s=0,o=t(this);return n=n||t.Deferred(),o.filter(N).each(function(n,o){t.Deferred(function(n){var u=t(o),a=u.data(),f=a[y]||(a[y]=[]),c=a[m]||[];n.done(function(){u.attr(E,a[d]).unbind(b,C),delete a[d]}),h.apply(t,f).done(function(){var o=s,p;l.call(f,n),delete a[m],u.removeAttr(S);while((p=c.shift())!==i)t.Deferred(function(n){r[s++]=n,t.Deferred(function(t){t.then(function(){n.resolve(p)},n.reject,n.notify),p.stop(t)})});h.apply(t,r.slice(o,s)).then(n.resolve,n.reject,n.notify)})})}),h.apply(t,r).then(n.resolve,n.reject,n.notify),o},t.fn[m]=function(){var n=[],r=arguments.length>0?RegExp(t.map(arguments,function(e){return"^"+e+"$"}).join("|"),"m"):i;return t(this).each(function(s,o){if(!t.hasData(o))return;l.apply(n,r===i?t.data(o,m):t.map(t.data(o,m),function(e){return r.test(e.displayName)?e:i}))}),n}}),define("troopjs-jquery/hashchange",["jquery"],function(t){function a(e){var t=s.exec(e.location.href);return t&&t[1]?decodeURIComponent(t[1]):""}function f(e){var t=this,n;t.element=n=e.createElement("iframe"),n.src="about:blank",n.style.display="none"}var n="interval",r="hashchange",i="on"+r,s=/#(.*)$/,o=/\?/,u=0;f.prototype={getElement:function(){return this.element},getHash:function(){return this.element.contentWindow.frameHash},update:function(e){var t=this,n=t.element.contentWindow.document;if(t.getHash()===e)return;n.open(),n.write("<html><head><title>' + document.title + '</title><script type='text/javascript'>var frameHash='"+e+"';</script></head><body>&nbsp;</body></html>"),n.close()}},t.event.special[r]={setup:function(s,l,c){var h=this;if(i in h)return!1;if(!t.isWindow(h))throw new Error("Unable to bind 'hashchange' to a non-window object");var p=t(h),d=a(h),v=h.location;p.data(n,h.setInterval(u?function(){var t=h.document,n=v.protocol==="file:",i=new f(t);return t.body.appendChild(i.getElement()),i.update(d),function(){var t=d,s,u=a(h),f=i.getHash();f!==d&&f!==u?(s=decodeURIComponent(f),d!==s&&(d=s,i.update(d),p.trigger(r,[s,t])),v.hash="#"+encodeURI(n?f.replace(o,"%3F"):f)):u!==d&&(s=decodeURIComponent(u),d!==s&&(d=s,p.trigger(r,[s,t])))}}():function(){var t=d,n,i=a(h);i!==d&&(n=decodeURIComponent(i),d!==n&&(d=n,p.trigger(r,[n,t])))},25))},teardown:function(r){var s=this;if(i in s)return!1;s.clearInterval(t.data(s,n))}}});